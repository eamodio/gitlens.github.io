!function(){"use strict";var t,i;!function(t){t.on=function(t,i,s,e,n){let o=!1;if("string"==typeof t){const a=(null!=n?n:document).querySelectorAll(t);for(const t of a)t.addEventListener(i,s,null!=e&&e);return{dispose:()=>{if(!o){o=!0;for(const t of a)t.removeEventListener(i,s,null!=e&&e)}}}}return t.addEventListener(i,s,null!=e&&e),{dispose:()=>{o||(o=!0,t.removeEventListener(i,s,null!=e&&e))}}},t.$=function(t){return document.querySelectorAll(t)}}(t||(t={})),function(t){t.clear=function(){localStorage.clear()},t.get=function(t){const i=localStorage.getItem(t);if(null!=i)return JSON.parse(i)},t.remove=function(t){localStorage.removeItem(t)},t.set=function(t,i){localStorage.setItem(t,JSON.stringify(i))}}(i||(i={}));class s{constructor(i){this.name=i,this.activeVersion="12.1.0",this.versions=new Map;const s=this;t.on(`[data-action="${this.name}"]`,"click",this.onButtonClicked.bind(this)),t.on(`[data-view="${this.name}"] [data-action="scrollTo"]`,"click",(function(t){s.onScrollToClicked(this,t)})),t.on(`[data-view="${this.name}"] [data-action="showVersion"]`,"click",(function(t){s.onShowVersionClicked(this,t)}));const e=t.$(`.section[data-view="${this.name}"]`)[0];this.classes=["is-section",`is-section--${this.name}`];const n=e.dataset.classes;null!=n&&this.classes.push(...n.split(" ")),this.observer=new IntersectionObserver(this.onObserver.bind(this),{rootMargin:"0px 0px 0px 0px"});for(const t of document.querySelectorAll(".changelog__list>.changelog__list-item--version[id]"))this.versions.set(t.id,!1),this.observer.observe(t)}get hash(){return`#${this.name}`}activate(t,i=!1){document.body.classList.add(...this.classes)}deactivate(){document.body.classList.remove(...this.classes)}getHash(t){return`${this.hash}${t?`${t.startsWith("/")?t:`/${t}`}`:""}`.toLowerCase()}matchesPath(t){var i;return(null===(i=document.location.hash)||void 0===i?void 0:i.toLowerCase())===this.getHash(t)}setPath(t){document.location.hash=this.getHash(t)}onButtonClicked(t){var i;(null===(i=document.location.hash)||void 0===i?void 0:i.startsWith(this.hash))?document.location.hash="":this.setPath()}onObserver(t,i){for(const i of t)this.versions.set(i.target.id,i.isIntersecting);let s;for(const[t,i]of this.versions.entries())if(i){s=t;break}if(void 0===s){if(1!==t.length)return;const i=t[0];if(null==i.boundingClientRect||null==i.rootBounds)return;if(s=i.target.id,i.boundingClientRect.top>=i.rootBounds.bottom){const t=[...this.versions.keys()],i=t.indexOf(s);if(i<=0)return;s=t[i-1]}}this.activeVersion!==s?(void 0!==this.activeVersion&&this.toggleVersionLink(this.activeVersion,!1),this.activeVersion=s,this.toggleVersionLink(this.activeVersion,!0)):this.toggleVersionLink(this.activeVersion,!0)}onScrollToClicked(i,s){const e=i.dataset.scrollTo,n=document.getElementById(e),o=n.closest("section[id]"),a=t.$(`[data-target="patches"][data-version="${o.dataset.version}"]`)[0].getBoundingClientRect().height+8,h=o.getBoundingClientRect().top,c=n.getBoundingClientRect().top-h-a;o.parentElement.scrollTo({top:c,behavior:"smooth"})}onShowVersionClicked(i,s){t.$(`[data-view="${this.name}"]`)[0].dataset.version=i.dataset.version}toggleVersionLink(t,i){const s=document.querySelector(`a[data-action="scrollTo"][data-scroll-to="${t}"]`);null!=s&&s.classList.toggle("active",i)}}function e(t,i){return t+Math.random()*(i-t)}class n{constructor(){this.alpha=0,this.radius=0,this.x=0,this.y=0,this._vx=0,this._vy=0,this.reset()}reset(){this.alpha=e(.1,.9),this.radius=e(1,4),this.x=e(0,window.innerWidth),this.y=e(0,-window.innerHeight),this._vx=e(-3,3),this._vy=e(2,5)}update(){this.x+=this._vx,this.y+=this._vy,this.y+this.radius>window.innerHeight&&this.reset()}}class o{constructor(t=!1){var i,s,e;if(this.snowing=t,this._height=0,this._width=0,this._snowflakes=[],this._clearBound=this.clear.bind(this),this._updateBound=this.update.bind(this),this._canvas=null!==(i=document.querySelector("canvas.snow"))&&void 0!==i?i:void 0,this._ctx=null!==(e=null===(s=this._canvas)||void 0===s?void 0:s.getContext("2d"))&&void 0!==e?e:void 0,null==this._ctx)return;const n=document.querySelector(".snow__trigger");null!=n&&n.addEventListener("click",(()=>this.onToggle(!this.snowing))),window.addEventListener("resize",(()=>this.onResize())),this.onResize(),this.onToggle(t)}onToggle(t){if(this.snowing=t,document.body.classList.toggle("snowing",this.snowing),this.snowing){new Audio("assets/bells.mp3").play(),this.createSnowflakes(),requestAnimationFrame(this._updateBound)}}onResize(){null!=this._canvas&&(this._height=window.innerHeight,this._width=window.innerWidth,this._canvas.width=this._width,this._canvas.height=this._height)}clear(){null!=this._canvas&&null!=this._ctx&&(this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._snowflakes.length=0)}createSnowflakes(){const t=window.innerWidth/4;for(let i=0;i<t;i++)this._snowflakes.push(new n)}update(){if(null==this._ctx)return;this._ctx.clearRect(0,0,this._width,this._height);const t=document.body.classList.contains("vscode-light")?"#424242":"#fff";for(const i of this._snowflakes)i.update(),this._ctx.save(),this._ctx.fillStyle=t,this._ctx.beginPath(),this._ctx.arc(i.x,i.y,i.radius,0,2*Math.PI),this._ctx.closePath(),this._ctx.globalAlpha=i.alpha,this._ctx.fill(),this._ctx.restore();requestAnimationFrame(this.snowing?this._updateBound:this._clearBound)}}new class{constructor(){this.activeView="",this._sectionCompleteHandle=0,this.views=[];for(const i of t.$(".section[data-view]")){const t=i.dataset.view;null!=t&&this.views.push(new s(t))}t.on('[data-action="back"]',"click",this.onBackButtonClicked.bind(this)),t.on(".changelog__image","click",(function(){this.classList.toggle("expand",!this.classList.contains("expand"))})),window.addEventListener("hashchange",this.onHashChanged.bind(this),!1);const[i,e]=this.getHashAndPaths();this.switchView(i,e,!0)}switchView(t,i,s=!1){window.clearTimeout(this._sectionCompleteHandle),this._sectionCompleteHandle=0;const e=this.activeView;switch(t){case"":if(this.activeView="",e!==this.activeView){const t=this.views.find((t=>t.name===e));null!=t&&t.deactivate()}document.body.classList.toggle("complete",s),s||(document.location.hash="");break;default:{const n=this.views.find((i=>i.name===t));if(null==n)return void this.switchView("",[],!1);if(this.activeView=t,e!==this.activeView){const t=this.views.find((t=>t.name===e));null!=t&&t.deactivate()}n.activate(i,s),document.body.classList.toggle("complete",s),s||(this._sectionCompleteHandle=window.setTimeout((()=>document.body.classList.add("complete")),1e3));break}}s&&setTimeout((()=>document.body.classList.remove("preload")),1)}onBackButtonClicked(t){document.location.hash=""}onHashChanged(t){const[i,s]=this.getHashAndPaths();this.redirect(i,s)||this.switchView(i,s)}getHashAndPaths(){var t;let i=null===(t=document.location.hash)||void 0===t?void 0:t.substring(1),s=[];return i&&([i,...s]=i.split("/")),[i,s]}redirect(t,i){return("support-gitlens"===t||"sponsor"===t)&&(document.location.hash="#",!0)}},requestAnimationFrame((()=>new o))}();
//# sourceMappingURL=main.js.map